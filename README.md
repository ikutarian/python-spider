# python-spider

## 正则表达式

|操作符|说明|实例
|:--|:--|:--|
|.|表示任何单个字符||
|[]|字符集，对单个字符给出取值范围|[abc]表示a、b、c，[a-z]表示a到z单个字符|
|[^]|非字符集，对单个字符给出排除范围|[^abc]表示非a或非b或非c的单个字符|
|*|前一个字符0词或者无限次扩展|abc*表示ab、abc、abcc、abccc等|
|+|前一个字符1次或无限次扩展|abc+表示abc、abcc、abccc等|
|?|前一个字符0次或1次扩展|abc?表示ab、abc|
| &#124; |左右表达式任意一个| abc&#124;def 表示abc、def|
|{m}|扩展前一个字符m次|ab{2}c表示abbc|
|{m,n}|扩展前一个字符m至n次（含n）|ab{1,2}c表示abc、abbc|
|^|匹配字符串开头|^abc表示abc并且在一个字符串的开头|
|$|匹配字符串结尾|abc$表示abc并且在要给字符串的结尾|
|( )|分组标记，内部只能使用&#124;操作符|(abc)表示abc，(abc&#124;def)表示abc、def|
|\d|数字，等价于[0-9||
|\w|单词字符，等价于[A-Za-z0-9_]||

例子：

|正则表达式|含义|对应字符串|
|:--|:--|:--|
|P(Y&#124;YT&#124;YTH&#124;YTHO)?N|括号中的字符串出现0次或1次|PN PYN PYTN PYTHN PYTHON|
|PYTHON+|+前面的字符N，出现1次或多次|PYTHON PYTHONN PYHTONNN...|
|PY[TH]ON|中间的字符要么是T，要么是H|PYTON PYHON|
|PY[^TH]?ON|中间的字符不是T和H，并且出现0次或1次|PYON PYaON PYbON PYcON...|
|PY{:3}N|扩展Y字符0到3次|PN PYN PYYN PYYYN|

正则表达式经典实例

|正则表达式|含义|
|:--|:--|
|^[A-Za-z]+$|由26个字母组成的字符串|
|^[A-Za-z0-9]+$|由26个字母和数字组成的字符串|
|^-?\d+$|整数形式的字符串|
|^[0-9]*[1-9][0-9]*$|正整数形式的字符串|
|[1-9]\d{5}|中国境内的邮政编码（首位一定是1-9，后面跟上5个数字）|
|[\u4e00-\u9fa5]|匹配中文字符|
|(([1-9]?\d&#124;1\d{2}&#124;2[0-4]\d&#124;25[0-5]).){3}([1-9]?\d&#124;1\d{2}&#124;2[0-4]\d&#124;25[0-5])|IPv4地址|

贪婪匹配和最小匹配

```python
match re.search(r'PY.*N', 'PYANBNCNDN')
match.group(0)
```

一般来说，下面这几个情况都是符合的

```
PYAN
PYANBN
PYANBNCN
PYANBNCNDN
```

但是上面的代码输入的结果是

```
PYANBNCNDN
```

这是因为 Re 库默认采用贪婪匹配，即输入匹配最长的字串。

如果要改成最小匹配，只需要当有操作符可以匹配不同长度的时候，都可以在操作符后面加一个 `?`，来获得最小匹配的结果

|最小匹配操作符|说明|
|:--|:--|
|*?|前一个字符0次或无限次扩展，且是最小匹配|
|+?|前一个字符1次或无限次扩展，且是最小匹配|
|??|前一个字符0次或者1次扩展，且是最下匹配|
|{m,n}?|扩展前一个字符m至n次（含n），且是最小匹配|
